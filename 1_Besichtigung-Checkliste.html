<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Besichtigungs-Checkliste</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',sans-serif;background:#f5f5f5;padding:20px}.container{max-width:1000px;margin:0 auto;background:white;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,.06);padding:24px}header{margin-bottom:14px}h1{font-size:22px;margin-bottom:4px}p{color:#666}h2{margin:16px 0 8px}label{display:block;margin-bottom:6px;font-weight:600}input[type=text],input[type=tel],input[type=email],input[type=date],textarea,select{width:100%;padding:8px;border:1px solid #ddd;border-radius:6px;background:#fafafa;margin-bottom:10px}textarea{min-height:70px}button{cursor:pointer}nav{margin-bottom:12px}.navigation{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:12px}.nav-btn{background:#f0f0f0;border:0;padding:8px 10px;border-radius:6px}nav .nav-btn.active{background:#007bff;color:#fff}.form-group{margin-bottom:8px}.checkbox-group{margin-bottom:8px}.info-box{background:#eef6ff;padding:8px;border-left:4px solid #7fb3ff;margin-bottom:8px}.warning-box{background:#fff7e6;padding:8px;border-left:4px solid #ffd27a;margin-bottom:8px}.critical-box{background:#ffecec;padding:8px;border-left:4px solid #ff8a8a;margin-bottom:8px}.action-buttons{display:flex;gap:8px;margin-top:12px}
.progress{background:#eee;border-radius:6px;height:20px;overflow:hidden;margin:10px 0}.progress-bar{height:100%;background:#4caf50;color:#fff;text-align:center;padding:2px 6px}
</style>
</head>
<body>
<div class="container">
<header><h1>üìã Besichtigungs-Checkliste</h1><p>Vor Auftragserteilung</p></header>
<div class="instructions"><h3>üìñ Anleitung</h3><ul style="margin-left:20px;margin-top:10px"><li>Navigation oben nutzen</li><li>H√§kchen setzen & Felder ausf√ºllen</li><li>Am Ende absenden</li></ul></div>
<div class="progress"><div class="progress-bar" id="progressBar">0%</div></div>
<div class="navigation">
<button class="nav-btn active" onclick="showSection(0)">1. Kundendaten</button>
<button class="nav-btn" onclick="showSection(1)">2. Verkauf</button>
<button class="nav-btn" onclick="showSection(2)">3. Technik</button>
<button class="nav-btn" onclick="showSection(3)">4. Baustelle</button>
<button class="nav-btn" onclick="showSection(4)">5. FAQ</button>
<button class="nav-btn" onclick="showSection(5)">6. Abschluss</button>
</div>

<div class="section active" id="section0">
<h2>1. Kundendaten</h2>
<div class="form-group"><label>Name:</label><input type="text" id="kunde_name"></div>
<div class="form-group"><label>Adresse:</label><input type="text" id="kunde_adresse"></div>
<div class="form-group"><label>Telefon:</label><input type="tel" id="kunde_tel"></div>
<div class="form-group"><label>E-Mail:</label><input type="email" id="kunde_email"></div>
<div class="form-group"><label>Ausweichnummer:</label><input type="text" id="kunde_ausweich"></div>
<div class="form-group"><label>Datum Besichtigung:</label><input type="date" id="besichtigung_datum"></div>
<div class="checkbox-group"><label><input type="checkbox" id="check_erstkontakt"> Erstkontakt erfolgreich</label></div>
<div class="checkbox-group"><label><input type="checkbox" id="check_email"> E-Mail gesendet</label></div>
</div>

<div class="section" id="section1">
<h2>2. Verkaufsgespr√§ch</h2>
<div class="form-group"><label>Warum Kunde uns kontaktiert?</label>
<div class="radio-group">
<label><input type="radio" name="kontaktgrund" value="empfehlung"> Empfehlung</label>
<label><input type="radio" name="kontaktgrund" value="internet"> Internet</label>
<label><input type="radio" name="kontaktgrund" value="baustelle"> Baustelle</label>
</div>
<input type="text" id="kontaktgrund_details" style="margin-top:10px">
</div>
<div class="form-group"><label>Kundenwunsch:</label><textarea id="kunde_wunsch"></textarea></div>
<div class="checkbox-group"><label><input type="checkbox" id="check_machbar"> Machbarkeit erkl√§rt</label></div>
<div class="checkbox-group"><label><input type="checkbox" id="check_preise"> Preise informiert</label></div>
<div class="form-group"><label>Nachlass?</label>
<div class="radio-group">
<label><input type="radio" name="nachlass" value="ja"> Ja</label>
<label><input type="radio" name="nachlass" value="nein"> Nein</label>
</div>
<input type="text" id="nachlass_details" style="margin-top:10px">
</div>
<div class="checkbox-group"><label><input type="checkbox" id="check_interessiert"> Kunde interessiert</label></div>
<div class="form-group"><label>Schwierig? Hinweise?</label><textarea id="kunde_hinweise"></textarea></div>
</div>

<div class="section" id="section2">
<h2>3. Technische Kl√§rung</h2>
<div class="form-group"><label>Wer macht Einreichung?</label>
<div class="radio-group">
<label><input type="radio" name="einreichung" value="wir"> Wir</label>
<label><input type="radio" name="einreichung" value="kunde"> Kunde</label>
<label><input type="radio" name="einreichung" value="architekt"> Architekt</label>
</div>
<input type="text" id="einreichung_details" style="margin-top:10px">
</div>
<div class="form-group"><label>Wer macht Anbindeleitungen?</label>
<div class="radio-group">
<label><input type="radio" name="anbindung" value="wir"> Wir</label>
<label><input type="radio" name="anbindung" value="kunde"> Kunde</label>
</div>
<input type="text" id="anbindung_details" style="margin-top:10px">
</div>
<div class="form-group"><label>Wer besorgt Mulden?</label>
<div class="radio-group">
<label><input type="radio" name="mulden" value="wir"> Wir</label>
<label><input type="radio" name="mulden" value="kunde"> Kunde</label>
</div>
<input type="text" id="mulden_details" style="margin-top:10px">
</div>
<div class="checkbox-group"><label><input type="checkbox" id="check_strassensperre"> Stra√üensperre gekl√§rt</label></div>
<div class="checkbox-group"><label><input type="checkbox" id="check_pflichten"> Kundenpflichten erkl√§rt</label></div>
<div class="info-box"><strong>Kunde muss bereitstellen:</strong> Strom 32A, Wasser 4bar, Zufahrt, Aufstellfl√§che</div>
<div class="checkbox-group"><label><input type="checkbox" id="check_strom"> Strom vorhanden</label></div>
<div class="checkbox-group"><label><input type="checkbox" id="check_wasser"> Wasser vorhanden</label></div>
</div>

<div class="section" id="section3">
<h2>4. Baustelleninfos</h2>
<div class="form-group"><label>Ort/Besonderheiten:</label><textarea id="baustelle_ort"></textarea></div>
<div class="form-group"><label>Bohrsystem:</label>
<select id="bohrsystem">
<option value="">W√§hlen...</option>
<option value="hammerbohren">Hammerbohren</option>
<option value="spuelbohren">Sp√ºlbohren</option>
</select>
</div>
<div class="form-group"><label>Verpressmaterial:</label><input type="text" id="verpressmaterial"></div>
<div class="form-group"><label>Sonden:</label>
<div class="radio-group">
<label><input type="radio" name="sonden" value="duplex"> Duplex</label>
<label><input type="radio" name="sonden" value="simplex"> Simplex</label>
</div>
<input type="text" id="sonden_details" style="margin-top:10px">
</div>
<div class="form-group"><label>Auflagen Bescheid:</label><textarea id="auflagen"></textarea></div>
<div class="form-group"><label>Start geplant:</label><input type="date" id="start_datum"></div>
<div class="form-group"><label>Meter gesamt:</label><input type="text" id="meter_gesamt"></div>
<div class="form-group"><label>Zufahrt OK?</label>
<div class="radio-group">
<label><input type="radio" name="zufahrt" value="ja"> Ja</label>
<label><input type="radio" name="zufahrt" value="nein"> Nein</label>
</div>
<textarea id="zufahrt_details" style="margin-top:10px"></textarea>
</div>
<div class="checkbox-group"><label><input type="checkbox" id="check_fotos"> Fotos gemacht</label></div>
</div>

<div class="section" id="section4">
<h2>5. FAQ f√ºr Kunden</h2>
<div class="warning-box"><strong>Raster 6-8m:</strong> Zu nah = gegenseitige Beeinflussung</div>
<div class="warning-box"><strong>Erdbeben:</strong> Sonden flexibel, kein Problem</div>
<div class="warning-box"><strong>Haltbarkeit:</strong> 50-100 Jahre</div>
<div class="warning-box"><strong>Duplex vs Simplex:</strong> Duplex effizienter aber teurer</div>
<div class="warning-box"><strong>Garantie:</strong> Gew√§hrleistung + Herstellergarantie</div>
<div class="warning-box"><strong>Frostschutz:</strong> -15 bis -20¬∞C, 30-35% Mischung</div>
<div class="warning-box"><strong>Dauer:</strong> 1 Bohrung 100-150m = 1-2 Tage</div>
<div class="warning-box"><strong>Vorteile:</strong> Hohe Effizienz, kein L√§rm, wartungsarm</div>
<div class="warning-box"><strong>Leitungen:</strong> Min. 80cm tief (Frostgrenze)</div>
<div class="warning-box"><strong>Aktivk√ºhlung:</strong> W√§rmepumpe kann k√ºhlen</div>
<div class="warning-box"><strong>Inverter:</strong> Selbstregelnd, effizienter</div>
<div class="warning-box"><strong>Normen:</strong> √ñNORM B 2600, Wasserrechtsgesetz</div>
<div class="warning-box"><strong>Artesischer Brunnen:</strong> Geologe + Beh√∂rde, Grundbesitzer haftet</div>
<div class="warning-box"><strong>Kontrolle:</strong> Geologe, Beh√∂rde, Druckpr√ºfung</div>
<div class="warning-box"><strong>Unser Gewerk:</strong> Bohrungen, Sonden, Verpressung, Druckpr√ºfung. NICHT: W√§rmepumpe, Pflaster</div>
<div class="critical-box"><strong>HAFTUNGSAUSSCHL√úSSE - Schriftlich best√§tigen:</strong><br>
1. Flursch√§den - keine Haftung<br>
2. Abstand Nachbar - Best√§tigung<br>
3. Wasser auf Grundst√ºck - Best√§tigung<br>
4. Wasser in Kanal - illegal, Best√§tigung + Aufkl√§rung</div>
<div class="checkbox-group"><label><input type="checkbox" id="check_faq"> FAQs besprochen</label></div>
</div>

<div class="section" id="section5">
<h2>6. Abschluss</h2>
<div class="form-group"><label>Will Kunde beauftragen?</label>
<div class="radio-group">
<label><input type="radio" name="beauftragung" value="ja"> ‚úÖ Ja</label>
<label><input type="radio" name="beauftragung" value="wahrscheinlich"> ‚è≥ Wahrscheinlich</label>
<label><input type="radio" name="beauftragung" value="unsicher"> ‚ùì Unsicher</label>
<label><input type="radio" name="beauftragung" value="nein"> ‚ùå Nein</label>
</div>
</div>
<div class="checkbox-group"><label><input type="checkbox" id="check_auftragsbestaetigung"> Auftragsbest√§tigung eingeleitet</label></div>
<div class="checkbox-group"><label><input type="checkbox" id="check_kunde_bestaetigt"> Kunde hat unterschrieben</label></div>
<div class="form-group"><label>Ausweichnummer intern:</label><input type="text" id="ausweichnummer_intern"></div>
<div class="form-group"><label>Anzahlung?</label>
<div class="radio-group">
<label><input type="radio" name="anzahlung" value="ja"> Ja</label>
<label><input type="radio" name="anzahlung" value="nein"> Nein</label>
</div>
<input type="text" id="anzahlung_details" placeholder="50% bei Auftrag" style="margin-top:10px">
</div>
<div class="form-group"><label>Zusammenfassung / Was NICHT gemacht?</label><textarea id="zusammenfassung"></textarea></div>
<div class="form-group"><label>Bearbeiter:</label><input type="text" id="bearbeiter"></div>
</div>

<!-- Datenschutzhinweis -->
<div class="checkbox-group" style="margin-top:12px"><label><input type="checkbox" id="datenschutz_ok"> Ich stimme der Verarbeitung meiner Daten gem√§√ü Datenschutzbestimmungen zu.</label></div>

<div class="action-buttons">
<button class="btn btn-secondary" onclick="resetForm()">üîÑ Reset</button>
<button class="btn btn-success" onclick="saveData()">üíæ Speichern</button>
<button class="btn btn-primary" onclick="window.print()">üìÑ PDF</button>
<button class="btn btn-primary" onclick="submitToFormspree()">üì® Absenden</button>
</div>
</div>

<script>
function showSection(i){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById('section'+i).classList.add('active');
  document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
  document.querySelectorAll('.nav-btn')[i].classList.add('active');
  // progress
  const total = document.querySelectorAll('.section').length;
  const pct = Math.round(((i+1)/total)*100);
  const bar = document.getElementById('progressBar'); if(bar) bar.textContent = pct + '%';
  if(bar) bar.style.width = pct + '%';
}

function resetForm(){
  if(!confirm('Formular zur√ºcksetzen?')) return;
  document.querySelectorAll('input,textarea,select').forEach(el=>{
    if(el.type==='checkbox' || el.type==='radio') el.checked = false;
    else el.value = '';
  });
}

function saveData(){
  const data = collectFormData();
  try{ localStorage.setItem('besichtigung_checklist', JSON.stringify(data)); alert('Gespeichert (local)'); }catch(e){alert('Speichern fehlgeschlagen');}
}

function collectFormData(){
  const data = {};
  // collect by id
  document.querySelectorAll('[id]').forEach(el=>{
    const id = el.id;
    if(!id) return;
    if(el.type==='checkbox') data[id] = el.checked;
    else if(el.type==='radio') { /* ignore, handled by name below */ }
    else data[id] = el.value || '';
  });
  // collect radio groups by name
  const radios = document.querySelectorAll('input[type=radio][name]');
  const radioNames = new Set(); radios.forEach(r=>radioNames.add(r.name));
  radioNames.forEach(name=>{ const sel = document.querySelector('input[type=radio][name="'+name+'"]:checked'); data[name] = sel ? sel.value : ''; });
  return data;
}

async function submitToFormspree(){
  if(!document.getElementById('datenschutz_ok') || !document.getElementById('datenschutz_ok').checked){ alert('Bitte Datenschutzbest√§tigung ankreuzen.'); return; }
  const data = collectFormData();
  // optional subject
  data._subject = 'Neue Besichtigungs-Checkliste';
  try{
    const resp = await fetch('https://formspree.io/f/DEINE-ID', {
      method: 'POST', headers: {'Content-Type':'application/json'}, body: JSON.stringify(data)
    });
    if(resp.ok){ window.location.href = 'danke.html'; } else { const txt = await resp.text(); alert('Senden fehlgeschlagen: '+resp.status+' '+txt); }
  }catch(e){ alert('Fehler beim Senden: '+e.message); }
}

// restore saved data on load
window.addEventListener('load', ()=>{
  const raw = localStorage.getItem('besichtigung_checklist');
  if(!raw) return;
  try{
    const data = JSON.parse(raw);
    Object.keys(data).forEach(k=>{
      const el = document.getElementById(k);
      if(el){ if(el.type==='checkbox') el.checked = data[k]; else el.value = data[k]; }
      else if(document.querySelectorAll('input[type=radio][name="'+k+'"]').length){ const sel = document.querySelector('input[type=radio][name="'+k+'"][value="'+data[k]+'"]'); if(sel) sel.checked = true; }
    });
  }catch(e){}
});
</script>
</body>
</html>